{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// js/pixabay-api.js\n\nimport axios from 'axios';\n\nconst API_KEY = '43843961-af0153872675268c29353c689';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(searchQuery, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}&page=${page}`);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","// js/render-functions.js\n\n// Показує індикатор завантаження\nexport function showLoader(loaderContainer) {\n  loaderContainer.style.display = 'flex';\n}\n\n// Приховує індикатор завантаження\nexport function hideLoader(loaderContainer) {\n  loaderContainer.style.display = 'none';\n}\n\n// Показує кнопку \"Завантажити ще\"\nexport function showLoadMoreBtn(loadMoreBtn) {\n  loadMoreBtn.classList.remove('hidden');\n}\n\n// Приховує кнопку \"Завантажити ще\"\nexport function hideLoadMoreBtn(loadMoreBtn) {\n  loadMoreBtn.classList.add('hidden');\n}\n\n// Показує індикатор завантаження на кнопці\nexport function showLoadingIndicatorBtn(loaderBtn) {\n  loaderBtn.classList.remove('hidden');\n}\n\n// Приховує індикатор завантаження на кнопці\nexport function hideLoadingIndicatorBtn(loaderBtn) {\n  loaderBtn.classList.add('hidden');\n}\n\n// Створює розмітку для зображень\nexport function createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\" target=\"_blank\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"photo-card__image\" />\n          </a>\n          <div class=\"photo-card__info\">\n            <p class=\"photo-card__info-item\"><b>Likes:</b> ${likes}</p>\n            <p class=\"photo-card__info-item\"><b>Views:</b> ${views}</p>\n            <p class=\"photo-card__info-item\"><b>Comments:</b> ${comments}</p>\n            <p class=\"photo-card__info-item\"><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </div>\n      `\n    )\n    .join('');\n}\n\n// Очищує галерею\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  createMarkup,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  showLoadingIndicatorBtn,\n  hideLoadingIndicatorBtn,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const form = document.querySelector('#search-form');\n  const input = document.querySelector('#search-input');\n  const gallery = document.querySelector('.gallery');\n  const loaderContainer = document.querySelector('.loader-container');\n  const loadMoreBtn = document.querySelector('.load-more');\n\n  hideLoadMoreBtn(loadMoreBtn); // Спочатку приховуємо кнопку Load More\n  hideLoader(loaderContainer); // Спочатку приховуємо індикатор завантаження\n\n  let searchQuery = '';\n  let page = 1;\n  let totalHits = 0;\n\n  form.addEventListener('submit', onSearch);\n  loadMoreBtn.addEventListener('click', onLoadMore);\n\n  function onSearch(event) {\n    event.preventDefault();\n    searchQuery = input.value.trim();\n    page = 1; // Скидаємо номер сторінки до 1 при новому запиті\n    clearGallery();\n    showLoader(loaderContainer);\n    hideLoadMoreBtn(loadMoreBtn);\n\n    if (searchQuery === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query!',\n      });\n      input.value = '';\n      hideLoader(loaderContainer);\n      return;\n    }\n\n    fetchImages(searchQuery, page)\n      .then(data => {\n        if (data.hits && data.hits.length > 0) {\n          const markup = createMarkup(data.hits);\n          gallery.insertAdjacentHTML('beforeend', markup);\n\n          const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n          });\n          lightbox.refresh();\n\n          totalHits = data.totalHits;\n          if (gallery.children.length < totalHits) {\n            showLoadMoreBtn(loadMoreBtn);\n          }\n        } else {\n          iziToast.error({\n            title: 'Error',\n            message: 'No images found!',\n          });\n        }\n        input.value = '';\n      })\n      .catch(error => {\n        iziToast.error({\n          title: 'Error',\n          message: error.message,\n        });\n        input.value = '';\n      })\n      .finally(() => hideLoader(loaderContainer));\n  }\n\n  function onLoadMore() {\n    page += 1;\n    showLoader(loaderContainer); // Показуємо індикатор завантаження під кнопкою\n\n    fetchImages(searchQuery, page)\n      .then(data => {\n        if (data.hits && data.hits.length > 0) {\n          const markup = createMarkup(data.hits);\n          gallery.insertAdjacentHTML('beforeend', markup);\n\n          const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n          });\n          lightbox.refresh();\n\n          if (gallery.children.length >= totalHits) {\n            hideLoadMoreBtn(loadMoreBtn);\n            iziToast.info({\n              title: 'Info',\n              message:\n                \"We're sorry, but you've reached the end of search results.\",\n            });\n          }\n\n          // Плавне прокручування сторінки\n          const { height: cardHeight } =\n            gallery.firstElementChild.getBoundingClientRect();\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        } else {\n          hideLoadMoreBtn(loadMoreBtn);\n        }\n      })\n      .catch(error => {\n        iziToast.error({\n          title: 'Error',\n          message: error.message,\n        });\n      })\n      .finally(() => hideLoader(loaderContainer));\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","params","axios","error","showLoader","loaderContainer","hideLoader","showLoadMoreBtn","loadMoreBtn","hideLoadMoreBtn","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","gallery","form","input","totalHits","onSearch","onLoadMore","event","iziToast","data","markup","SimpleLightbox","cardHeight"],"mappings":"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"}