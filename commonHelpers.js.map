{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// js/pixabay-api.js\n\nimport axios from 'axios';\n\nconst API_KEY = '43843961-af0153872675268c29353c689';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(searchQuery, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}&page=${page}`);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","// js/render-functions.js\n\n// Показує індикатор завантаження\nexport function showLoader(loaderContainer) {\n  loaderContainer.style.display = 'flex';\n}\n\n// Приховує індикатор завантаження\nexport function hideLoader(loaderContainer) {\n  loaderContainer.style.display = 'none';\n}\n\n// Показує кнопку \"Завантажити ще\"\nexport function showLoadMoreBtn(loadMoreBtn) {\n  loadMoreBtn.classList.remove('hidden');\n}\n\n// Приховує кнопку \"Завантажити ще\"\nexport function hideLoadMoreBtn(loadMoreBtn) {\n  loadMoreBtn.classList.add('hidden');\n}\n// Показує індикатор завантаження на кнопці\nexport function showLoadingIndicatorBtn(loaderBtn) {\n  loaderBtn.classList.remove('hidden');\n}\n\n// Приховує індикатор завантаження на кнопці\nexport function hideLoadingIndicatorBtn(loaderBtn) {\n  loaderBtn.classList.add('hidden');\n}\n\n// Створює розмітку для зображень\nexport function createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <div class=\"photo-card\">\n          <a href=\"${largeImageURL}\" target=\"_blank\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"photo-card__image\" />\n          </a>\n          <div class=\"photo-card__info\">\n            <p class=\"photo-card__info-item\"><b>Likes:</b> ${likes}</p>\n            <p class=\"photo-card__info-item\"><b>Views:</b> ${views}</p>\n            <p class=\"photo-card__info-item\"><b>Comments:</b> ${comments}</p>\n            <p class=\"photo-card__info-item\"><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </div>\n      `\n    )\n    .join('');\n}\n\n// Очищує галерею\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n","// main.js\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  createMarkup,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  showLoadingIndicatorBtn,\n  hideLoadingIndicatorBtn,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const form = document.querySelector('#search-form');\n  const input = document.querySelector('#search-input');\n  const gallery = document.querySelector('.gallery');\n  const loaderContainer = document.querySelector('.loader-container');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const loaderBtn = document.querySelector('.loader-btn');\n\n  // Приховуємо лоадер через секунду після завантаження сторінки\n  setTimeout(() => {\n    hideLoader(loaderContainer);\n  }, 1000);\n\n  let searchQuery = '';\n  let page = 1;\n  let totalHits = 0;\n\n  form.addEventListener('submit', onSearch);\n  loadMoreBtn.addEventListener('click', onLoadMore);\n\n  function onSearch(event) {\n    event.preventDefault();\n    searchQuery = input.value.trim();\n\n    if (searchQuery === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query!',\n      });\n      input.value = ''; // Очищення поля вводу форми при некоректному вводу\n      hideLoader(loaderContainer); // Приховуємо індикатор завантаження при некоректному вводу\n      return;\n    }\n\n    clearGallery();\n    showLoader(loaderContainer);\n    hideLoadMoreBtn(loadMoreBtn); // Приховуємо кнопку \"Load More\"\n\n    fetchImages(searchQuery, page)\n      .then(data => {\n        if (!data.hits || !Array.isArray(data.hits)) {\n          throw new Error('Unexpected response format');\n        }\n\n        const images = data.hits;\n        const markup = createMarkup(images);\n        gallery.insertAdjacentHTML('beforeend', markup);\n\n        // Оновлення SimpleLightbox після додавання нових зображень\n        const lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        lightbox.refresh();\n\n        totalHits = data.totalHits;\n\n        // Показуємо кнопку \"Load More\" якщо є більше результатів\n        if (totalHits > gallery.children.length) {\n          showLoadMoreBtn(loadMoreBtn);\n        }\n\n        input.value = ''; // Очищення поля вводу форми після успішного пошуку\n      })\n      .catch(error => {\n        iziToast.error({\n          title: 'Error',\n          message: error.message,\n        });\n\n        input.value = ''; // Очищення поля вводу форми при помилці\n      })\n      .finally(() => hideLoader(loaderContainer));\n  }\n\n  function onLoadMore() {\n    page += 1;\n    showLoadingIndicatorBtn(loaderBtn);\n    fetchImages(searchQuery, page)\n      .then(data => {\n        hideLoadingIndicatorBtn(loaderBtn);\n\n        if (!data.hits || !Array.isArray(data.hits)) {\n          throw new Error('Unexpected response format');\n        }\n\n        const images = data.hits;\n        const markup = createMarkup(images);\n        gallery.insertAdjacentHTML('beforeend', markup);\n\n        // Оновлення SimpleLightbox після додавання нових зображень\n        const lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        lightbox.refresh();\n\n        // Показуємо кнопку \"Load More\" якщо є більше результатів\n        if (totalHits > gallery.children.length) {\n          showLoadMoreBtn(loadMoreBtn);\n        } else {\n          hideLoadMoreBtn(loadMoreBtn);\n        }\n\n        smoothScroll();\n      })\n      .catch(error => {\n        hideLoadingIndicatorBtn(loaderBtn);\n        iziToast.error({\n          title: 'Error',\n          message: error.message,\n        });\n      });\n  }\n\n  function smoothScroll() {\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","params","axios","error","showLoader","loaderContainer","hideLoader","showLoadMoreBtn","loadMoreBtn","hideLoadMoreBtn","showLoadingIndicatorBtn","loaderBtn","hideLoadingIndicatorBtn","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","gallery","form","input","totalHits","onSearch","onLoadMore","event","iziToast","data","markup","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"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"}